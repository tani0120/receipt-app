# ADR-007: Human Use-Case Table形式（Phase 3-A）

**Status**: Accepted  
**Date**: 2026-01-17  
**Context**: Phase 3-A（利用シーン棚卸し）の成果物形式を確定  
**Parent**: [ADR-004: Penta-Shield](./ADR-004-penta-shield-defense-layers.md)

---

## Context（背景）

### 問題

Phase 3-A（利用シーン棚卸し）において、以下の問題が発生していた：

1. **文章形式の限界**:
   - 後でAIが構造を誤解する
   - 意味定義に引きずられる
   - 複数UseCase間で比較できない

2. **プロパティ名の早期混入リスク**:
   - 人間が無意識にプロパティ名を書いてしまう
   - AIが推測でプロパティ名を埋めてしまう
   - Phase 3-C（意味定義確定）の前に意味が固まってしまう

3. **曖昧さの表現困難**:
   - 「正確でなくてよい」「感覚で十分」を文章で表現すると冗長
   - 判断基準を数値化してしまう誘惑が強い

---

## Decision（決定事項）

### Human Use-Case Tableを標準形式とする

**Phase 3-Aの成果物は、以下の9項目の表形式で記述する**:

| 項目 | 内容 |
|---|---|
| **利用者** | 誰が使うか（経理担当／記帳代行／マネージャー 等） |
| **タイミング** | いつ（月初／月中／月末／突発対応 等） |
| **目的** | 何のために見る・使うか |
| **きっかけ** | 何が起きたらこの行動を取るか |
| **行動** | 画面上で何を確認・操作するか |
| **判断** | 何を見て、何を決めたいか |
| **許容曖昧さ** | 正確でなくてよい／傾向が分かればよい 等 |
| **間違うと困ること** | 誤ると何が起きるか |
| **代替手段** | 今はExcel／記憶／Slack 等で代替しているか |

---

### なぜ表形式か

**✅ 比較できる**:
- 複数UseCase間で欠けている項目が分かる
- 「きっかけ」が書かれていないUseCaseを発見できる

**✅ 視覚的**:
- 一覧性が高い
- 欠けている項目が一目で分かる

**✅ 射影可能**:
- Phase 3-Cでproperty-integration-map.mdに対応付けられる
- 各プロパティが「どのUseCaseを支えるか」を機械的に分析できる

**❌ 文章だけの問題**:
- AIが構造を誤解する
- 意味定義に引きずられる

---

### 禁止事項（厳守）

**人間に対する禁止事項**:
- ❌ プロパティ名を書かない
- ❌ 型を書かない
- ❌ 実装・画面名を書かない
- ❌ 判断基準を数値化しない（「感覚」「傾向」で十分）

**IDE（AI）に対する禁止事項**:
- ❌ プロパティ名を推測して埋めない
- ❌ 判断基準を数値化しない
- ❌ UI構成を確定させない
- ❌ 意味を決めない

**IDE（AI）への明示指示**:
> 「この表は意味を決めるためのものではない。
> プロパティ名を推測して埋めない。
> 判断基準を数値化しない。
> UI構成を確定させない。
> 人間が語る業務文脈を構造化して保持することに専念せよ。」

---

## この表の使われ方

### Phase 3-B（UIモック）

- この表を1行ずつUIに変換
- 「この判断、画面でできないな？」を炙り出す
- UIで実現不可能な判断を発見 → UseCase修正 or プロパティ追加

### Phase 3-C（意味定義確定）

- 初めて「どのプロパティがどのUseCaseを支えるか」を対応付ける
- property-integration-map.mdの「意味」列を更新
- 孤立プロパティ（orphan）を発見 → 削除 or 再設計

**重要な原則**:
```
for each property:
  find related UseCases
  if none:
    flag as orphan → 削除 or 再設計
```

---

## 具体例

### 例：顧問先の採算確認

| 項目 | 内容 |
|---|---|
| **利用者** | マネージャー |
| **タイミング** | 月末 |
| **目的** | この顧問先が儲かっているか直感的に把握したい |
| **きっかけ** | 今月忙しかった感覚がある |
| **行動** | 顧問先一覧をざっと眺める |
| **判断** | 「これは赤字っぽい」「これは問題なさそう」 |
| **許容曖昧さ** | 正確な原価計算は不要、感覚一致で十分 |
| **間違うと困ること** | 赤字顧問先を放置してしまう |
| **代替手段** | スタッフの愚痴・記憶 |

**重要**: この例では、プロパティ名（想定仕訳数、作業時間、報酬）は一切出てきませんが、Phase 3-Cで自然に紐づきます。

---

## Consequences（影響）

### 正の影響

| 観点 | 効果 |
|------|------|
| **意味定義の遅延** | Phase 3-Cまで意味定義を遅延できる |
| **曖昧さの保存** | 「感覚」「傾向」を構造化して保持できる |
| **比較可能性** | 複数UseCase間で欠けている項目を発見できる |
| **射影可能性** | property-integration-map.mdへの対応付けが機械的に可能 |

### 負の影響

| 観点 | 影響 |
|------|------|
| **学習コスト** | 表形式のフォーマットを理解する必要 |
| **記入コスト** | 9項目すべてを埋める必要（負担増） |

**対策**:
- usecase-workbook.mdに空のテンプレートを複数用意
- UC-001に具体例を記載

---

## 実装要件

### usecase-workbook.mdの構成

1. **表形式テンプレート**（冒頭に記載）
2. **禁止事項**（IDE向け・人間向け）
3. **Step 1**: 業務判断が匂う項目の抽出（IDEが実施）
4. **Step 2**: 人間がUseCaseを記述（表形式）
5. **空のテンプレート**（UC-002〜005等）

### 完了条件

- [ ] 主要業務フローがUseCaseとして記述されている
- [ ] 各UseCaseの9項目すべてが埋められている
- [ ] プロパティ名・型・実装が一切記述されていない
- [ ] 後続フェーズでプロパティを過不足なく再構成できる密度がある

---

## 関連ADR

- [ADR-004: Penta-Shield（5層防御）](./ADR-004-penta-shield-defense-layers.md)
- [ADR-003: ファイル整理戦略](./ADR-003-file-organization-strategy.md)

---

## 変更履歴

| 日付 | 変更内容 | 変更者 |
|------|---------|--------|
| 2026-01-17 | 初版作成（Human Use-Case Table形式確定） | 司令官 + AI |
