# TASK: UI統合（Phase 5前の必須作業）

**作成日**: 2026-01-17  
**最終更新**: 2026-01-17  
**ステータス**: 計画中  
**優先度**: 🔥 最高（Phase 5ブロッカー）  
**親タスク**: TASK_MASTER.md - Penta-Shield実装  
**関連**: ADR-002、ADR-004、TASK_PHASE5_L4L5.md

---

## 目的

**Phase 5（L4 Visual Guard）の前提条件を確立する**

### 問題の本質

- 公開URL（Cloud Run）: 80%正しい（実運用の痕跡）
- ローカルURL: 20%正しい（前AIが混乱した修正）
- **L4 Visual Guardは「このUIが契約」= 契約すべきUIが存在しない**

### なぜ最優先か

> Phase 5でやること = Visual Guard（UIを契約にする）  
> 今の状態で進むと = **バグを永久保存する**

---

## 作業手順

### Phase 1: 公開UI観測（修正しない）

- [ ] 公開URLにアクセス
- [ ] 全画面スクリーンショット撮影
- [ ] 表示項目リストアップ
- [ ] walkthrough.mdに「公開UI観測ログ」作成

**禁止**: 公開UIを修正、改善提案

---

### Phase 2: ローカルUI整理（壊す前提）

- [ ] ローカルURL確認
- [ ] 表示項目を全リストアップ
- [ ] 各項目の出所を特定
- [ ] Geminiの残骸を可視化

**禁止**: この段階でUIを修正

---

### Phase 3: 統合設計作成（90%の正）

- [ ] 公開UI（80%） + ローカルUI（20%）を統合
- [ ] 統合設計書作成

**禁止**: この段階でFreeze、UIを修正

---

### Phase 4: ローカルUI修正

- [ ] ローカルUIを統合設計に合わせて修正
- [ ] 全項目が説明可能な状態を確認

---

### Phase 5: 検証

- [ ] 「なぜ存在するか不明」な項目がゼロ
- [ ] git commit/push

---

## Phase 5進行可能条件

- [ ] 公開UI観測ログ完成
- [ ] ローカルUI項目リスト完成
- [ ] 統合設計書完成
- [ ] ローカルUI修正完了
- [ ] 全項目が説明可能
- [ ] TASK_MASTER.mdに「AI破壊ログ」記録

---

## AI破壊ログ（TASK_MASTER.md記録用）

```markdown
### [2026-01-17] admin-settings UI 分裂

- **レイヤー**: L4準備（Visual Guard前）
- **事象**: 公開UIとローカルUIが乖離（公開80%正、ローカル20%正）
- **原因**: 複数AI（Gemini）による文脈非同期修正、正の参照点を定義しないままデバッグ
- **本来の正解**: 公開UIを観測→統合設計→ローカルUI修正
- **AIの癖**: 「直しているつもり」で多世界分岐を作る
- **是正策**: 公開UIを不可侵の「事実」として扱う、ローカルUIは統合設計に従って再構築
```

---

**最終更新**: 2026-01-17
