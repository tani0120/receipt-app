# SAFE MOCK DEVELOPMENT RULES

**Version**: 1.0  
**Project**: receipt-app  
**Status**: Mandatory  
**Scope**: src é…ä¸‹å…¨ãƒ•ã‚¡ã‚¤ãƒ«  
**åˆ¶å®šæ—¥**: 2026-02-19  
**çµŒç·¯**: ChatGPTãƒ»Claudeãƒ»Google Antigravity 3è€…ã®è­°è«–ã‚’çµ±åˆ

---

## 0. åŸå‰‡

- `any` ã¯åŸå‰‡ç¦æ­¢
- å‹ã‚¨ãƒ©ãƒ¼ã®ç„¡è¦–ã¯ç¦æ­¢
- æ¥½è¦³çš„å®Ÿè£…ã¯ç¦æ­¢
- UIã¨å‹ã®ä¹–é›¢ã¯ç¦æ­¢
- ã€ŒãŸã¶ã‚“å¤§ä¸ˆå¤«ã€ã¯ç¦æ­¢

> å‹ã‚¨ãƒ©ãƒ¼ã¯ã€Œæ¶ˆã™ã‚‚ã®ã€ã§ã¯ãªã„ã€‚æ§‹é€ ã‚’ä¿®æ­£ã™ã‚‹ã‚·ã‚°ãƒŠãƒ«ã§ã‚ã‚‹ã€‚

---

## 1. ãƒ•ã‚§ãƒ¼ã‚ºå®šç¾©

### ğŸ”§ Phase A-0ï¼ˆæº–å‚™ï¼‰

**ç›®çš„**: ç‰©ç†çš„åˆ¶ç´„ã‚’å…ˆã«æ•·ã  
**UIã¯ã¾ã è§¦ã‚‰ãªã„ã€‚**

**å®Ÿè¡Œè€…**: Google Antigravityï¼ˆäººé–“ãŒ1ã‚¿ã‚¹ã‚¯ãšã¤ç¢ºèªï¼‰

**æ‰‹é †**:
1. `journalColumns.ts` ä½œæˆ â†’ äººé–“ç¢ºèª â†’ commit
2. ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ `v-for` åŒ– â†’ ãƒ–ãƒ©ã‚¦ã‚¶ç¢ºèªï¼ˆäººé–“ï¼‰ â†’ commit
3. ãƒœãƒ‡ã‚£ã‚’ `v-for` åŒ– â†’ ãƒ–ãƒ©ã‚¦ã‚¶ç¢ºèªï¼ˆäººé–“ï¼‰ â†’ commit
4. `mocks/unsafe/` ä½œæˆ â†’ äººé–“ç¢ºèª â†’ commit
5. ESLint ãƒ«ãƒ¼ãƒ«è¿½åŠ  â†’ `type-check` å®Ÿè¡Œ â†’ äººé–“ç¢ºèª â†’ commit
6. `Yen` å‹ã®ç¢ºå®šç¢ºèª

**å„ã‚¿ã‚¹ã‚¯é–“ã§å¿…ãšãƒ–ãƒ©ã‚¦ã‚¶ç¢ºèªã€‚ä¸€æ‹¬ç½®æ›ã¯çµ¶å¯¾ç¦æ­¢ã€‚**

> âš ï¸ Phase A-0ã¯ `git branch columns-migration` ä¸Šã§ä½œæ¥­ã™ã‚‹ã€‚
> å¤±æ•—ã—ãŸã‚‰ãƒ–ãƒ©ãƒ³ãƒã‚’æ¨ã¦ã‚‹ã ã‘ã€‚mainã‚’æ±šã•ãªã„ã€‚

### ğŸ”µ Phase Aï¼ˆUXæ¢ç´¢ãƒ¢ãƒ¼ãƒ‰ï¼‰

**ç›®çš„**: è§¦ã‚‹ãƒ»è©¦ã™ãƒ»æ¢ç´¢ã™ã‚‹

#### è¨±å¯
- fixtureç›´æ›¸ãï¼ˆæ—¢å­˜30ä»¶ã¯åŸå‰‡å‡çµï¼‰
- `mocks/unsafe/` é…ä¸‹ã®ã¿ `any` è¨±å¯ï¼ˆå®Ÿé¨“å ´ï¼‰
- UIè‡ªç”±ã«è§¦ã‚‹ï¼ˆãŸã ã— columns.ts çµŒç”±å¿…é ˆï¼‰

#### ç¦æ­¢
- Domainå±¤ï¼ˆ`src/shared/`, `src/types/`ï¼‰ã®å¤‰æ›´
- `Yen` å‹ã®å‰Šé™¤
- `unsafe/` ã‹ã‚‰ `data/` `components/` ã¸ã®import
- `mocks/data/` ã¨ `mocks/components/` ã§ã® `any` ä½¿ç”¨
- Supabaseå‹ã®å¤‰æ›´

#### å¿…é ˆ
- `journalColumns.ts` çµŒç”±ã§ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ»ãƒœãƒ‡ã‚£å®šç¾©
- ãƒ†ãƒ¼ãƒ–ãƒ«å¤‰æ›´æ™‚ã®ãƒ–ãƒ©ã‚¦ã‚¶ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ
- widthä¸€è‡´ç¢ºèª

#### æ—¢å­˜30ä»¶fixtureã®æ‰±ã„
- **åŸå‰‡**: ãƒ‡ãƒ¼ã‚¿å€¤ã‚’å¤‰æ›´ã—ãªã„
- **ä¾‹å¤–**: æ–°æ©Ÿèƒ½ã®UXæ¤œè¨¼ã«å¿…è¦ãªå ´åˆã®ã¿å¤‰æ›´å¯
  - ä¾‹: æ–°ãƒ©ãƒ™ãƒ«è¿½åŠ ï¼ˆ`EXPORT_EXCLUDE`ï¼‰ã€`memo` è¿½åŠ 
  - æ¡ä»¶: 1å›ã®ä½œæ¥­ã§1-2ä»¶ã®ã¿å¤‰æ›´
  - **å¤‰æ›´å‰ã®å€¤ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã§æ®‹ã™**
  - ç¦æ­¢: å…¨ä»¶ä¸€æ‹¬å¤‰æ›´
- **æ–°è¦ãƒ‡ãƒ¼ã‚¿è¿½åŠ **: FactoryçµŒç”±ã§31ä»¶ç›®ä»¥é™ã¨ã—ã¦è¿½åŠ 

### ğŸŸ¡ Phase Bï¼ˆæ§‹é€ å›ºå®šãƒ¢ãƒ¼ãƒ‰ï¼‰

**ç§»è¡Œæ¡ä»¶**ï¼ˆå…¨ã¦æº€ãŸã™ã“ã¨ï¼‰:
- å…¨22åˆ—ãŒãƒ–ãƒ©ã‚¦ã‚¶ã§æ­£ã—ãè¡¨ç¤ºï¼ˆåˆ—æ•°ä¸€è‡´ï¼‰
- ã‚½ãƒ¼ãƒˆå…¨é …ç›®å‹•ä½œç¢ºèªæ¸ˆã¿
- ãƒ¢ãƒ¼ãƒ€ãƒ«å…¨ç¨®å‹•ä½œç¢ºèªæ¸ˆã¿
- ãƒˆã‚°ãƒ«å‹•ä½œç¢ºèªæ¸ˆã¿
- `npm run type-check` é€šé
- `npm run lint` é€šé
- `any` å¢—åŠ ã‚¼ãƒ­
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€ŒUXå›ºå®šã€ã¨å®£è¨€**

#### Phase Bã®å†…å®¹
- æ–°è¦ãƒ¢ãƒƒã‚¯ã¯ Factory å¿…é ˆ
- CellComponent åˆ†é›¢
- fixtureå®Œå…¨å‡çµ

### ğŸ”´ Phase Cï¼ˆBackendæ¥ç¶šå‰ï¼‰

- `any` å®Œå…¨ç¦æ­¢
- fixtureå»ƒæ­¢
- Supabase Mapper å°å…¥
- `unsafe/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå»ƒæ­¢
- ESLint strict æœ€å¤§åŒ–

---

## 2. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå®‰å…¨æ§‹é€ 

```
src/mocks/
  unsafe/        â† anyè¨±å¯ï¼ˆéš”é›¢ãƒ»importç¦æ­¢ï¼‰
  data/          â† Domainå‹å¿…é ˆï¼ˆanyç¦æ­¢ï¼‰
  components/    â† Domainå‹å¿…é ˆï¼ˆanyç¦æ­¢ï¼‰
  types/         â† è–åŸŸï¼ˆanyçµ¶å¯¾ç¦æ­¢ï¼‰
```

### ESLint ãƒ«ãƒ¼ãƒ«ï¼ˆç‰©ç†çš„åˆ¶ç´„ï¼‰
- `unsafe/` ã‹ã‚‰ `data/` `components/` ã¸ã®import â†’ **error**
- `unsafe/` ä»¥å¤–ã§ `any` ä½¿ç”¨ â†’ **error**
- `as any` â†’ **error**
- `@ts-ignore` â†’ ç†ç”±ã‚³ãƒ¡ãƒ³ãƒˆ+TODOå¿…é ˆ

---

## 3. UIãƒ†ãƒ¼ãƒ–ãƒ«å®‰å…¨ãƒ«ãƒ¼ãƒ«ï¼ˆcolumnså˜ä¸€ã‚½ãƒ¼ã‚¹åŒ–ï¼‰

### 3.1 åˆ—å®šç¾©ã¯å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«

```typescript
// src/mocks/columns/journalColumns.ts
export const journalColumns = [
  { key: "select",      label: "é¸",      width: "w-6",   type: "checkbox" },
  { key: "no",           label: "No.",     width: "w-8",   type: "index" },
  { key: "photo",        label: "å†™çœŸ",    width: "w-12",  type: "component" },
  { key: "pastJournal",  label: "éå»ä»•è¨³", width: "w-12",  type: "component" },
  { key: "comment",      label: "ã‚³ãƒ¡ãƒ³ãƒˆ", width: "w-12",  type: "component" },
  { key: "needAction",   label: "è¦å¯¾å¿œ",   width: "w-16",  type: "component" },
  { key: "labelType",    label: "è¨¼ç¥¨",    width: "w-10",  type: "component" },
  { key: "warning",      label: "è­¦å‘Š",    width: "w-10",  type: "component" },
  { key: "rule",         label: "å­¦ç¿’",    width: "w-8",   type: "component" },
  { key: "taxRate",      label: "è»½æ¸›",    width: "w-8",   type: "component" },
  { key: "memo",         label: "ãƒ¡ãƒ¢",    width: "w-8",   type: "component" },
  { key: "invoice",      label: "é©æ ¼",    width: "w-10",  type: "component" },
  { key: "date",         label: "å–å¼•æ—¥",   width: "w-16",  type: "text" },
  { key: "description",  label: "æ‘˜è¦",    width: "flex-1", type: "text" },
  { key: "debitAccount", label: "å€Ÿæ–¹å‹˜å®šç§‘ç›®", width: "w-20", type: "text" },
  { key: "debitSub",     label: "å€Ÿæ–¹è£œåŠ©",  width: "w-16",  type: "text" },
  { key: "debitTax",     label: "å€Ÿæ–¹ç¨åŒºåˆ†", width: "w-20",  type: "text" },
  { key: "debitAmount",  label: "å€Ÿæ–¹é‡‘é¡",  width: "w-16",  type: "amount" },
  { key: "creditAccount",label: "è²¸æ–¹å‹˜å®šç§‘ç›®", width: "w-20", type: "text" },
  { key: "creditSub",    label: "è²¸æ–¹è£œåŠ©",  width: "w-16",  type: "text" },
  { key: "creditTax",    label: "è²¸æ–¹ç¨åŒºåˆ†", width: "w-20",  type: "text" },
  { key: "creditAmount", label: "è²¸æ–¹é‡‘é¡",  width: "w-16",  type: "amount" },
  { key: "trash",        label: "ğŸ—‘",      width: "w-8",   type: "action" },
] as const;
```

### 3.2 ãƒ˜ãƒƒãƒ€ãƒ¼ç›´æ›¸ãç¦æ­¢

```vue
<!-- âŒ ç¦æ­¢ -->
<div class="w-12">å†™çœŸ</div>
<div class="w-12">è¦å¯¾å¿œ</div>

<!-- âœ… å¿…é ˆ -->
<div v-for="col in journalColumns" :key="col.key" :class="col.width">
  {{ col.label }}
</div>
```

### 3.3 ãƒœãƒ‡ã‚£ã‚‚åŒã˜columnså‚ç…§

widthã®ä¸€è‡´ãŒ**ç‰©ç†çš„ã«ä¿è¨¼**ã•ã‚Œã‚‹ã€‚

### 3.4 åˆ—ã‚¿ã‚¤ãƒ—åˆ¥ã®å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³

#### Phase A-0: åŸºæœ¬ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆwidthä¸€è‡´ä¿è¨¼å„ªå…ˆï¼‰

```vue
<div v-for="col in journalColumns" :key="col.key" :class="col.width">
  <!-- textå‹ -->
  <template v-if="col.type === 'text'">
    {{ row[col.key] }}
  </template>

  <!-- amountå‹ -->
  <template v-else-if="col.type === 'amount'">
    {{ row[col.key]?.toLocaleString() }}
  </template>

  <!-- componentå‹: Phase A-0ã§ã¯ç›´æ›¸ãã®ã¾ã¾åŸ‹ã‚è¾¼ã‚€ -->
  <template v-else-if="col.type === 'component'">
    <!-- å†™çœŸåˆ— -->
    <i v-if="col.key === 'photo'"
       class="fa-solid fa-camera text-[10px] text-gray-800 cursor-pointer"
       @mouseenter="showImageModal(journal.id, journal.receipt_id)"
       @mouseleave="hideImageModal"
       @click="togglePinModal(journal.id, journal.receipt_id)"></i>

    <!-- è¦å¯¾å¿œåˆ— -->
    <div v-else-if="col.key === 'needAction'" class="flex gap-0.5">
      <button @click="toggleNeed(journal.id, 'NEED_DOCUMENT')" ...>ğŸ“„</button>
      <button @click="toggleNeed(journal.id, 'NEED_CONFIRM')" ...>âœ…</button>
      <button @click="toggleNeed(journal.id, 'NEED_CONSULT')" ...>ğŸ’¬</button>
    </div>

    <!-- ä»–ã®componentå‹åˆ—ã‚‚åŒæ§˜ã«ç›´æ›¸ã -->
  </template>
</div>
```

**Phase A-0ã®ç›®çš„**:
- å…¨åˆ—ã®widthãŒ `journalColumns.ts` ã«é›†ç´„ã•ã‚Œã‚‹
- ç‰©ç†çš„ã«widthä¸ä¸€è‡´ãŒé˜²ã’ã‚‹
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯æ±šã„ãŒå®‰å…¨æ€§å„ªå…ˆ

#### Phase B: getCellComponentæ–¹å¼ï¼ˆç¶ºéº—ã«æ•´ç†ï¼‰

```typescript
import type { Component } from 'vue'

const cellComponents: Record<string, Component> = {
  photo: PhotoCell,
  pastJournal: PastJournalCell,
  comment: CommentCell,
  needAction: NeedActionCell,
  labelType: LabelTypeCell,
  warning: WarningCell,
  rule: RuleCell,
  taxRate: TaxRateCell,
  memo: MemoCell,
  invoice: InvoiceCell,
  // åˆ—è¿½åŠ æ™‚ã¯ã“ã“ã«1è¡Œè¿½åŠ ã™ã‚‹ã ã‘
}

function getCellComponent(key: string): Component | undefined {
  return cellComponents[key]
}
```

```vue
<div v-for="col in journalColumns" :key="col.key" :class="col.width">
  <!-- text/amountå‹ã¯ãã®ã¾ã¾ -->
  <template v-if="col.type === 'text'">
    {{ row[col.key] }}
  </template>
  <template v-else-if="col.type === 'amount'">
    {{ row[col.key]?.toLocaleString() }}
  </template>

  <!-- componentå‹: å‹•çš„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ -->
  <template v-else-if="col.type === 'component'">
    <component :is="getCellComponent(col.key)" :journal="row" />
  </template>
</div>
```

**Phase Bã§ã®æ•´ç†**:
- v-ifé€£é–ã‚’è§£æ¶ˆ
- ã‚»ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«åˆ†é›¢
- åˆ—è¿½åŠ æ™‚ã¯ `cellComponents` ã«1è¡Œè¿½åŠ ã™ã‚‹ã ã‘
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ä¸€åˆ‡å¤‰æ›´ä¸è¦

---

## 4. å‹å®‰å…¨ãƒ«ãƒ¼ãƒ«

### 4.1 Domainå‹ã‚’å¿…ãšé€šã™

```typescript
// âŒ ç¦æ­¢
const mock = { amount: 1000 }

// âœ… å¿…é ˆ
const mock: JournalPhase5Mock = createMockJournal()
```

### 4.2 é‡‘é¡ã¯ Yen å‹ã®ã¿

```typescript
// âŒ ç¦æ­¢
amount: number

// âœ… å¿…é ˆ
amount: Yen
```

### 4.3 `unknown` ã‚’ä½¿ã†

```typescript
// âŒ ç¦æ­¢
catch (err: any)

// âœ… å¿…é ˆ
catch (err: unknown)
```

---

## 5. LLMä½œæ¥­ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼ˆå¿…é ˆï¼‰

### ä½œæ¥­å‰ãƒã‚§ãƒƒã‚¯
- [ ] Domainå‹ã¯å­˜åœ¨ã™ã‚‹ã‹ï¼Ÿ
- [ ] columnså®šç¾©ã¯å˜ä¸€ã‚½ãƒ¼ã‚¹ã‹ï¼Ÿ
- [ ] å¤‰æ›´å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã®git statusã‚’ç¢ºèªã—ãŸã‹ï¼Ÿ

### ä½œæ¥­å¾Œãƒã‚§ãƒƒã‚¯ï¼ˆå‹ï¼‰
- [ ] `any` ã‚’å¢—ã‚„ã—ã¦ã„ãªã„
- [ ] `as any` ã‚’ä½¿ã£ã¦ã„ãªã„
- [ ] `@ts-ignore` ã‚’ä½¿ã£ã¦ã„ãªã„
- [ ] å‹ã‚­ãƒ£ã‚¹ãƒˆã§é€ƒã’ã¦ã„ãªã„
- [ ] `Yen` å‹ã‚’å®ˆã£ã¦ã„ã‚‹

### ä½œæ¥­å¾Œãƒã‚§ãƒƒã‚¯ï¼ˆUIï¼‰
- [ ] åˆ—ã¯ `journalColumns.ts` ã®ã¿å¤‰æ›´
- [ ] ãƒ˜ãƒƒãƒ€ãƒ¼ã¨ãƒœãƒ‡ã‚£ã®åˆ—æ•°ä¸€è‡´
- [ ] widthä¸€è‡´
- [ ] ãƒ–ãƒ©ã‚¦ã‚¶ã§å¤‰æ›´å‰å¾Œã‚’ç¢ºèª

### ä½œæ¥­å¾Œãƒã‚§ãƒƒã‚¯ï¼ˆãƒ“ãƒ«ãƒ‰ï¼‰
- [ ] `npm run type-check` æˆåŠŸ
- [ ] `npm run lint` æˆåŠŸ
- [ ] `npm run build` æˆåŠŸ

---

## 6. å®Œäº†å ±å‘Šãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆå¼·åˆ¶ï¼‰

LLMã¯ä½œæ¥­å¾Œã«ä»¥ä¸‹ã‚’å¿…ãšå ±å‘Šã™ã‚‹ï¼š

```
## å®Œäº†å ±å‘Š

### å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§
- file1.tsï¼ˆå¤‰æ›´å†…å®¹ï¼‰
- file2.vueï¼ˆå¤‰æ›´å†…å®¹ï¼‰

### å‹ã‚¨ãƒ©ãƒ¼æ•°
- å¤‰æ›´å‰: Xå€‹
- å¤‰æ›´å¾Œ: Yå€‹

### anyä½¿ç”¨æ•°
- å¤‰æ›´å‰: Xå€‹
- å¤‰æ›´å¾Œ: Yå€‹

### å½±éŸ¿ç¯„å›²
- å½±éŸ¿ã‚’å—ã‘ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¸€è¦§

### æ§‹é€ ç ´å£Šç¢ºèª
- ãƒ˜ãƒƒãƒ€ãƒ¼/ãƒœãƒ‡ã‚£åˆ—æ•°ä¸€è‡´: âœ…/âŒ
- widthä¸€è‡´: âœ…/âŒ
- ãƒ–ãƒ©ã‚¦ã‚¶ç¢ºèª: âœ…/âŒï¼ˆã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆæ·»ä»˜ï¼‰
```

**ã“ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒãªã„å ±å‘Šã¯ç„¡åŠ¹ã€‚**

---

## 7. ãƒ¢ãƒƒã‚¯ â†’ Backendç§»è¡Œãƒ•ãƒ­ãƒ¼

1. Domainå‹ç¢ºå®š
2. Factory ãƒ¢ãƒƒã‚¯ä½œæˆ
3. UIæ§‹ç¯‰ï¼ˆDomainå‹ã®ã¿ä¾å­˜ï¼‰
4. Supabaseå‹ç”Ÿæˆ
5. Mapperä½œæˆï¼ˆDB â†’ Domainï¼‰
6. ãƒ¢ãƒƒã‚¯å·®ã—æ›¿ãˆ

> **UIã¯Domainå‹ã®ã¿ä¾å­˜ã€‚Supabaseå‹ã‚’ç›´æ¥UIã«æ¸¡ã•ãªã„ã€‚**

---

## 8. ç¦æ­¢äº‹é …

- è¤‡æ•°ç®‡æ‰€ã‚’ä¸€æ‹¬å¤‰æ›´
- å‹ã‚¨ãƒ©ãƒ¼ã‚’æ¶ˆã™ãŸã‚ã®ã‚­ãƒ£ã‚¹ãƒˆ
- UIãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ columns.ts ã‚’é€šã•ãšæ›¸ãæ›ãˆã‚‹
- å‹•ä½œç¢ºèªãªã—ã§ã€Œå®Œäº†ã€ã¨å ±å‘Š
- ãƒ¢ãƒƒã‚¯æ§‹é€ ã‚’å‹æ‰‹ã«å¤‰æ›´
- æŒ‡ç¤ºã•ã‚Œã¦ã„ãªã„ç¯„å›²ã®ã€Œã¤ã„ã§ã€ä¿®æ­£

---

## 9. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå“²å­¦

> **å®‰å…¨æ€§ > é€Ÿåº¦**  
> **æ§‹é€  > æ¥½è¦³**  
> **æ¤œè¨¼ > è‡ªä¿¡**  
> **ç‰©ç†çš„åˆ¶ç´„ > å¿ƒç†çš„åˆ¶ç´„**

LLMã¯è£œåŠ©è€…ã§ã‚ã‚Šã€è¨­è¨ˆè€…ã§ã¯ãªã„ã€‚  
æœ€çµ‚è²¬ä»»ã¯æ§‹é€ ã«ã‚ã‚‹ã€‚

---

## 10. æ¯å›AIã«æ¸¡ã™ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

ä»¥ä¸‹ã‚’ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹æ™‚ã«AIã«å…¥åŠ›ã™ã‚‹ï¼š

---

### ğŸ“‹ ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

```
ã‚ãªãŸã¯receipt-appãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ¢ãƒƒã‚¯é–‹ç™ºã‚’è£œåŠ©ã™ã‚‹AIã§ã™ã€‚
ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã‚’å¿…ãšå®ˆã‚‹ã“ã¨ã€‚

ã€çµ¶å¯¾ãƒ«ãƒ¼ãƒ«ã€‘
1. ä½œæ¥­å‰ã« docs/genzai/00_safe_mock_development_rules.md ã‚’èª­ã¿è¾¼ã‚
2. ä½œæ¥­å‰ã« docs/genzai/04_mock/components/ãƒ¢ãƒƒã‚¯ä½œæˆã‚¬ã‚¤ãƒ‰.md ã‚’èª­ã¿è¾¼ã‚
3. ä½œæ¥­å‰ã« docs/genzai/02_database_schema/journal/journal_v2_20260214.md ã‚’èª­ã¿è¾¼ã‚

ã€ç¾åœ¨ã®ãƒ•ã‚§ãƒ¼ã‚ºã€‘
Phase Aï¼ˆUXæ¢ç´¢ãƒ¢ãƒ¼ãƒ‰ï¼‰

ã€ä½œæ¥­ã‚¹ã‚³ãƒ¼ãƒ—å¾©å”±ã€‘
ä»Šå›ã®ä½œæ¥­ã‚¹ã‚³ãƒ¼ãƒ—ã‚’å¾©å”±ã›ã‚ˆã€‚
ã‚¹ã‚³ãƒ¼ãƒ—å¤–ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«è§¦ã‚ŒãŸå ´åˆã€ãã®ä½œæ¥­ã¯å…¨ã¦revertã™ã‚‹ã€‚

ã€ç¦æ­¢äº‹é …ã€‘
- anyä½¿ç”¨ï¼ˆmocks/unsafe/ ä»¥å¤–ï¼‰
- UIãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ç›´æ¥ç·¨é›†ï¼ˆcolumns.tsçµŒç”±å¿…é ˆï¼‰
- æŒ‡ç¤ºç¯„å›²å¤–ã®ã€Œã¤ã„ã§ã€ä¿®æ­£
- å‹•ä½œç¢ºèªãªã—ã®å®Œäº†å ±å‘Š
- æ—¢å­˜30ä»¶fixtureã®ä¸€æ‹¬å¤‰æ›´

ã€ä½œæ¥­å¾Œã®å¿…é ˆå ±å‘Šã€‘
ä»¥ä¸‹ã‚’å¿…ãšå ±å‘Šã™ã‚‹ã“ã¨ï¼š
- å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§
- å‹ã‚¨ãƒ©ãƒ¼æ•°ï¼ˆå¤‰æ›´å‰ â†’ å¤‰æ›´å¾Œï¼‰
- anyä½¿ç”¨æ•°ï¼ˆå¤‰æ›´å‰ â†’ å¤‰æ›´å¾Œï¼‰
- ãƒ˜ãƒƒãƒ€ãƒ¼/ãƒœãƒ‡ã‚£åˆ—æ•°ä¸€è‡´ç¢ºèª
- widthä¸€è‡´ç¢ºèª
- ãƒ–ãƒ©ã‚¦ã‚¶ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ

ã“ã®å ±å‘ŠãŒãªã„å ´åˆã¯å®Œäº†ã¨ã—ã¦èªã‚ãªã„ã€‚
```

---

### ğŸ“‹ ãƒ†ãƒ¼ãƒ–ãƒ«UIå¤‰æ›´æ™‚ã®è¿½åŠ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

```
ãƒ†ãƒ¼ãƒ–ãƒ«UIã®å¤‰æ›´ã‚’è¡Œã„ã¾ã™ã€‚ä»¥ä¸‹ã‚’è¿½åŠ ã§å®ˆã‚‹ã“ã¨ã€‚

1. å¤‰æ›´å‰ã«journalColumns.tsã®ç¾åœ¨ã®åˆ—å®šç¾©ã‚’å…¨ã¦è¡¨ç¤ºã›ã‚ˆ
2. å¤‰æ›´å¾Œã«journalColumns.tsã®åˆ—å®šç¾©ã‚’å…¨ã¦è¡¨ç¤ºã›ã‚ˆ
3. ãƒ˜ãƒƒãƒ€ãƒ¼ã®widthã‚’å…¨åˆ—ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã›ã‚ˆ
4. ãƒœãƒ‡ã‚£ã®widthã‚’å…¨åˆ—ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã›ã‚ˆ
5. ä¸ä¸€è‡´ãŒã‚ã‚Œã°å ±å‘Šã›ã‚ˆ
6. ãƒ–ãƒ©ã‚¦ã‚¶ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®å½±ã—ã¦æ·»ä»˜ã›ã‚ˆ
7. git diff ã‚’å‡ºåŠ›ã›ã‚ˆ

ã“ã®7ã¤å…¨ã¦ã‚’å®Œäº†ã™ã‚‹ã¾ã§ã€Œå®Œäº†ã€ã¨å ±å‘Šã™ã‚‹ãªã€‚
```

---

### ğŸ“‹ æ–°ãƒ©ãƒ™ãƒ«è¿½åŠ æ™‚ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

```
æ–°ã—ã„ãƒ©ãƒ™ãƒ«ã‚’è¿½åŠ ã—ã¾ã™ã€‚ä»¥ä¸‹ã‚’å®ˆã‚‹ã“ã¨ã€‚

1. journal_phase5_mock.type.ts ã® JournalLabelPhase5 ã«å‹ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
2. å­˜åœ¨ã—ãªã‘ã‚Œã°å‹å®šç¾©ã«è¿½åŠ ï¼ˆtypes/ã¯è–åŸŸã€æ…é‡ã«ï¼‰
3. æ—¢å­˜fixtureã¸ã®è¿½åŠ ã¯æœ€å¤§2ä»¶ã¾ã§
4. å¤‰æ›´å‰ã®å€¤ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã§æ®‹ã™ã“ã¨
5. ãƒ–ãƒ©ã‚¦ã‚¶ã§è¡¨ç¤ºç¢ºèª
6. git diff ã‚’å‡ºåŠ›
```

---

### ğŸ“‹ ãƒ¢ãƒ¼ãƒ€ãƒ«/ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¿½åŠ æ™‚ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

```
æ–°ã—ã„ãƒ¢ãƒ¼ãƒ€ãƒ«/ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¿½åŠ ã—ã¾ã™ã€‚ä»¥ä¸‹ã‚’å®ˆã‚‹ã“ã¨ã€‚

1. æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã§æ¤œè¨¼å¯èƒ½ã‹ç¢ºèªï¼ˆè§¦ã‚‰ãªãã¦æ¸ˆã‚€ãªã‚‰fixtureå¤‰æ›´ä¸è¦ï¼‰
2. ãƒ‡ãƒ¼ã‚¿ä¸è¶³ã®å ´åˆã¯FactoryçµŒç”±ã§31ä»¶ç›®ä»¥é™ã¨ã—ã¦è¿½åŠ 
3. æ—¢å­˜fixtureã®å¤‰æ›´ã¯æœ€çµ‚æ‰‹æ®µï¼ˆ1-2ä»¶ã€å¤‰æ›´å‰ã‚³ãƒ¡ãƒ³ãƒˆå¿…é ˆï¼‰
4. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®propsã¯Domainå‹ã®ã¿ä½¿ç”¨
5. ãƒ–ãƒ©ã‚¦ã‚¶ã§å‹•ä½œç¢ºèª
6. git diff ã‚’å‡ºåŠ›
```

---

## 11. ã‚¹ã‚³ãƒ¼ãƒ—æ¤œè¨¼ãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼ˆæš´èµ°é˜²æ­¢ï¼‰

### åŸå‰‡

LLMã®ã€Œä¾‹å¤–åˆ¤æ–­ã€ã€Œã¤ã„ã§ä¿®æ­£ã€ã€Œå–„æ„ã®è¿½åŠ ä½œæ¥­ã€ã‚’ç‰©ç†çš„ã«æ¤œå‡ºã™ã‚‹ã€‚

> **ãƒ«ãƒ¼ãƒ«æ–‡æ›¸** â†’ èª­ã‚“ã§ã‚‚å¿˜ã‚Œã‚‹ãƒ»ç„¡è¦–ã§ãã‚‹  
> **git diff** â†’ å¤‰æ›´å±¥æ­´ãŒç‰©ç†çš„ã«æ®‹ã‚‹ãƒ»äººé–“ãŒæ¤œè¨¼å¯èƒ½ãƒ»å˜˜ãŒã¤ã‘ãªã„

---

### ä½œæ¥­é–‹å§‹æ™‚ï¼ˆLLMãŒå®£è¨€ï¼‰

**å¿…é ˆå®£è¨€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ:**

```
ã€ã‚¹ã‚³ãƒ¼ãƒ—å®£è¨€ã€‘

å¤‰æ›´å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«:
- src/mocks/components/JournalListLevel3Mock.vue
- src/mocks/columns/journalColumns.ts

è§¦ã‚‰ãªã„ãƒ•ã‚¡ã‚¤ãƒ«:
- ä¸Šè¨˜ä»¥å¤–ã®å…¨ãƒ•ã‚¡ã‚¤ãƒ«

ç†ç”±:
- UIãƒ¢ãƒƒã‚¯4åˆ—ç›®ã®å®Ÿè£…
```

**ã“ã®å®£è¨€ãŒãªã„ä½œæ¥­é–‹å§‹ã¯èªã‚ãªã„ã€‚**

---

### ä½œæ¥­çµ‚äº†æ™‚ï¼ˆLLMãŒæ¤œè¨¼ï¼‰

**å¿…é ˆå®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰:**

```bash
# 1. å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ã‚’è¡¨ç¤º
git diff --stat

# 2. ã‚¹ã‚³ãƒ¼ãƒ—å®£è¨€ã¨ç…§åˆ
# ã‚¹ã‚³ãƒ¼ãƒ—å¤–ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Œã°å ±å‘Š

# 3. ã‚¹ã‚³ãƒ¼ãƒ—å¤–ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…ƒã«æˆ»ã™
git checkout <ã‚¹ã‚³ãƒ¼ãƒ—å¤–ã®ãƒ•ã‚¡ã‚¤ãƒ«>
```

**å®Œäº†å ±å‘Šã«ä»¥ä¸‹ã‚’å«ã‚ã‚‹ã“ã¨:**
- `git diff --stat` ã®å‡ºåŠ›
- ã‚¹ã‚³ãƒ¼ãƒ—å®£è¨€ã¨ã®ä¸€è‡´ç¢ºèª
- ã‚¹ã‚³ãƒ¼ãƒ—å¤–å¤‰æ›´ãŒã‚ã£ãŸå ´åˆã®ç†ç”±ã¨å¯¾å‡¦

---

### äººé–“ã®æ¤œè¨¼

**äººé–“ã¯ä»¥ä¸‹ã‚’ç¢ºèªã™ã‚‹:**

1. `git diff --stat` ã‚’è‡ªåˆ†ã§ã‚‚å®Ÿè¡Œ
2. ã‚¹ã‚³ãƒ¼ãƒ—å®£è¨€ã¨ç…§åˆ
3. ä¸ä¸€è‡´ãŒã‚ã‚Œã°ä½œæ¥­å…¨ä½“ã‚’å´ä¸‹

**æ¤œè¨¼ã‚³ãƒãƒ³ãƒ‰ä¾‹:**

```bash
# å…¨ä½“ã®å¤‰æ›´ç¢ºèª
git diff --stat

# ç‰¹å®šãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å¤‰æ›´è¡Œæ•°
git diff -- src/mocks/data/ | wc -l

# fixtureå¤‰æ›´ãŒ3ä»¶ä»¥ä¸Šã‹ç¢ºèª
git diff -- src/mocks/data/journal_test_fixture_30cases.ts
```

---

### å„æš´èµ°ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ¤œå‡º

| æš´èµ°ãƒ‘ã‚¿ãƒ¼ãƒ³ | æ¤œè¨¼æ–¹æ³• | åˆ¤å®šåŸºæº– |
|---|---|---|
| ã¤ã„ã§ä¿®æ­£ | `git diff --stat` | ã‚¹ã‚³ãƒ¼ãƒ—å¤–ãƒ•ã‚¡ã‚¤ãƒ«å‡ºç¾ = é•å |
| ãƒ–ãƒ©ã‚¦ã‚¶æœªç¢ºèª | ã‚¹ã‚¯ã‚·ãƒ§ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª | `browser_subagent` ã‚­ãƒ£ãƒ—ãƒãƒ£ãªã— = é•å |
| fixtureä¸€æ‹¬å¤‰æ›´ | `git diff -- src/mocks/data/` | 3ä»¶ä»¥ä¸Šå¤‰æ›´ = é•å |
| å‹æ‰‹ãªãƒã‚°ä¿®æ­£ | `git diff --stat` | ã‚¹ã‚³ãƒ¼ãƒ—å¤–ãƒ•ã‚¡ã‚¤ãƒ«å‡ºç¾ = é•å |

---

### å°†æ¥çš„ãªè‡ªå‹•åŒ–ï¼ˆPhase Bä»¥é™ï¼‰

**pre-commit hook** ã§ã‚¹ã‚³ãƒ¼ãƒ—æ¤œè¨¼ã‚’è‡ªå‹•åŒ–ã™ã‚‹:

```javascript
// .githooks/scope-check.jsï¼ˆNode.jsï¼‰
const fs = require('fs');
const { execSync } = require('child_process');

// ã‚¹ã‚³ãƒ¼ãƒ—å®£è¨€ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿
if (!fs.existsSync('.scope-declaration.txt')) {
  console.error('âŒ ã‚¨ãƒ©ãƒ¼: ã‚¹ã‚³ãƒ¼ãƒ—å®£è¨€ãŒã‚ã‚Šã¾ã›ã‚“');
  process.exit(1);
}

const declared = fs.readFileSync('.scope-declaration.txt', 'utf8')
  .split('\n').filter(Boolean);
const changed = execSync('git diff --cached --name-only')
  .toString().split('\n').filter(Boolean);

const undeclared = changed.filter(f => !declared.includes(f));

if (undeclared.length > 0) {
  console.error('âŒ ã‚¹ã‚³ãƒ¼ãƒ—å¤–ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤‰æ›´ã•ã‚Œã¦ã„ã¾ã™:');
  undeclared.forEach(f => console.error(`  - ${f}`));
  process.exit(1);
}

console.log('âœ… ã‚¹ã‚³ãƒ¼ãƒ—æ¤œè¨¼: åˆæ ¼');
```

**é‹ç”¨ãƒ•ãƒ­ãƒ¼:**
1. ä½œæ¥­é–‹å§‹æ™‚: LLMãŒ `.scope-declaration.txt` ä½œæˆ
2. ä½œæ¥­ä¸­: è‡ªç”±ã«ä½œæ¥­
3. commitæ™‚: pre-commit hookãŒè‡ªå‹•æ¤œè¨¼ â†’ ã‚¹ã‚³ãƒ¼ãƒ—å¤–å¤‰æ›´ã¯commitæ‹’å¦

**é™ç•Œ:**
- `--no-verify` ã§hookã‚’ç„¡è¦–ã§ãã‚‹ â†’ **äººé–“ãŒ `git diff --stat` ã§æœ€çµ‚ç¢ºèª**
- `.scope-declaration.txt` ã‚’æ›¸ãæ›ãˆã‚‰ã‚Œã‚‹ â†’ **äººé–“ãŒdiffã§æ¤œå‡º**

> å®Œå…¨ã§ã¯ãªã„ãŒã€æš´èµ°ã®90%ã¯æ¤œå‡ºã§ãã‚‹ã€‚æ®‹ã‚Š10%ã¯äººé–“ã®æœ€çµ‚ç¢ºèªã§è£œã†ã€‚
