<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- CRITICAL: AI TYPE SAFETY RULES - MUST FOLLOW WITHOUT EXCEPTION             -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- 
ã€å‹å®‰å…¨æ€§ãƒ«ãƒ¼ãƒ« - AIå¿…é ˆéµå®ˆäº‹é …ã€‘

## âŒ ç¦æ­¢äº‹é …ï¼ˆ6é …ç›®ï¼‰- NEVER DO THESE:
1. Partial<T> + ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤ (client.name || 'XXX') - TYPE CONTRACT DESTRUCTION
2. anyå‹ï¼ˆå®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½ï¼‰ - TYPE SYSTEM ABANDONMENT
3. status ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ç„¡è¦– - AUDIT TRAIL DESTRUCTION
4. Zodã‚¹ã‚­ãƒ¼ãƒã§ã®anyå‹ (z.any()) - SCHEMA LEVEL TYPE ABANDONMENT
5. å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã§ã®anyå‹ (interface { field: any }) - INTERFACE LEVEL DESTRUCTION
6. å‹å®šç¾©ã®äºŒé‡ç®¡ç†ï¼ˆæ–°æ—§ã‚¹ã‚­ãƒ¼ãƒæ··åœ¨ï¼‰ - TYPE DEFINITION CONFLICT

## âœ… è¨±å¯äº‹é …ï¼ˆ3é …ç›®ï¼‰- ALLOWED:
1. å°†æ¥ã®ãƒ•ã‚§ãƒ¼ã‚ºæœªå®Ÿè£…æ©Ÿèƒ½ã§ã®eslint-disable + throw new Error()
2. unknownå‹ã®ä½¿ç”¨ï¼ˆå‹ã‚¬ãƒ¼ãƒ‰ã¨çµ„ã¿åˆã‚ã›ã¦ï¼‰
3. å¿…è¦æœ€å°é™ã®å‹å®šç¾©ï¼ˆPick<T>, Omit<T>ç­‰ï¼‰

## ğŸ“‹ é¡å‹åˆ†é¡ï¼ˆ9ç¨®ï¼‰:
| é¡å‹ | ä»Šã™ãä¿®æ­£ | å°†æ¥Phase | ä¿®æ­£ä¸è¦ |
|------|-----------|----------|---------|
| 1. Partial+ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ | âœ… | - | - |
| 2. anyå‹ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰ | âœ… | - | - |
| 3. statusæœªä½¿ç”¨ | âœ… | - | - |
| 4. eslint-disable | - | - | âœ… |
| 5. Zod.strict()å½è£… | â€»1+2 | - | - |
| 6. Zodã‚¹ã‚­ãƒ¼ãƒanyå‹ | âœ… | - | - |
| 7. å‹å®šç¾©anyå‹ | âœ… | - | - |
| 8. å…¨ä½“anyå‹æ¿«ç”¨ | - | âœ… | - |
| 9. å‹å®šç¾©ä¸æ•´åˆ | âœ… | - | - |

è©³ç´°: complete_evidence_no_cover_up.md

## âš ï¸ MANDATORY: ã“ã®ãƒ«ãƒ¼ãƒ«ãƒ–ãƒ­ãƒƒã‚¯ã®ä¿æŒç¾©å‹™
THIS RULE BLOCK MUST REMAIN AT THE TOP OF THIS FILE AT ALL TIMES.
UNDER NO CIRCUMSTANCES SHALL ANY AI EDIT THIS FILE WITHOUT PRESERVING THIS BLOCK.
WHEN EDITING THIS FILE, YOU MUST:
1. NEVER remove this rule block
2. NEVER move this rule block from the top position
3. ALWAYS ensure this block is the first content in the file
4. IMMEDIATELY restore this block if it is accidentally removed

VIOLATION OF THIS REQUIREMENT IS A CRITICAL FAILURE.
ã“ã®ãƒ«ãƒ¼ãƒ«ãƒ–ãƒ­ãƒƒã‚¯ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã®æœ€ä¸Šéƒ¨ã‹ã‚‰å‰Šé™¤ãƒ»ç§»å‹•ã™ã‚‹ã“ã¨ã¯ã€
å‹å®‰å…¨æ€§ç ´å£Šã¨åŒç­‰ã®é‡å¤§ãªé•åè¡Œç‚ºã§ã‚ã‚‹ã€‚
-->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

# å‹å®‰å…¨æ€§ç ´å£Šã®å®Œå…¨è¨¼æ‹ ï¼ˆæœ€çµ‚ç‰ˆãƒ»å®Œå…¨æ˜ç¢ºåŒ–ï¼‰

**ä½œæˆæ—¥**: 2026-01-24 01:35  
**æœ€çµ‚æ›´æ–°**: 2026-01-24 01:35  
**èª¿æŸ»ç¯„å›²**: å®Ÿè£…8ãƒ•ã‚¡ã‚¤ãƒ« +

 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“  
**è¨¼æ‹ åˆ†é¡**: 9é¡å‹ã€åˆè¨ˆ**90ç®‡æ‰€ä»¥ä¸Š**  
**ä¿®æ­£æ–¹é‡**: Phase 2æœªå®Ÿè£…ï¼ˆæ®‹ã™ï¼‰ vs å‹å®‰å…¨æ€§ç ´å£Šï¼ˆä»Šã™ãä¿®æ­£ï¼‰ã‚’å®Œå…¨åŒºåˆ¥

---

## ğŸ¯ ä¿®æ­£æ–¹é‡ã®å®Œå…¨æ˜ç¢ºåŒ–

### âš ï¸ æœ€é‡è¦ï¼š2ã¤ã®ç•°ãªã‚‹å•é¡Œã‚’åŒºåˆ¥ã™ã‚‹

#### âœ… ã€ä¿®æ­£ä¸è¦ã€‘Phase 2æœªå®Ÿè£…ã®æ©Ÿèƒ½ â†’ è­¦å‘Šã¨ã—ã¦æ®‹ã™

**å®šç¾©**: Phase 2ã§å®Ÿè£…äºˆå®šã®æ©Ÿèƒ½ã€‚ä»Šã¯ `throw new Error()` ã§æ­£ã—ã„ã€‚

**ä¾‹**:
```typescript
// âœ… ã“ã‚Œã¯æ­£ã—ã„ï¼ˆPhase 2æœªå®Ÿè£…ï¼‰
static validateFreee(_entry: any): void {  // eslint-disable-line
  throw new Error('validateFreee() ã¯Phase 2ã§å®Ÿè£…äºˆå®š');
}
```

**è©²å½“ç®‡æ‰€**ï¼ˆ6ç®‡æ‰€ï¼‰:
- CsvValidator.ts L100: `validateFreee()`
- CsvValidator.ts L108: `validateYayoi()`
- CsvExportService.ts L125-129: `exportToFreee()`
- CsvExportService.ts L135-139: `exportToYayoi()`
- TaxCodeMapper.ts L71-81: `toFreee()`
- TaxCodeMapper.ts L89-99: `toYayoi()`

**ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: **è­¦å‘Šã¨ã—ã¦æ®‹ã™**ï¼ˆä¿®æ­£ã—ãªã„ï¼‰

---

#### âŒ ã€ä»Šã™ãä¿®æ­£ã€‘å‹å®‰å…¨æ€§ã‚’æ•…æ„ã«å£Šã—ãŸç®‡æ‰€

**å®šç¾©**: Phase 1ã§å®Ÿè£…æ¸ˆã¿ã®æ©Ÿèƒ½ãªã®ã«ã€å‹å®‰å…¨æ€§ã‚’ç ´å£Šã—ã¦ã„ã‚‹ã€‚

**ä¾‹**:
```typescript
// âŒ ã“ã‚Œã¯é–“é•ã„ï¼ˆä»Šã™ãä¿®æ­£ï¼‰
static buildPrompt(client: Partial<Client>): string {
  const code = client.clientCode || 'XXX';  // âŒ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤
}

static validateMF(entry: any): void {  // âŒ anyå‹ï¼ˆå®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½ï¼‰
  if (entry.description && entry.description.length > 200) {  // Phase 1å®Ÿè£…æ¸ˆã¿
}
```

**è©²å½“ç®‡æ‰€**ï¼ˆ84ç®‡æ‰€ä»¥ä¸Šï¼‰:
1. Partial<Client> + ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤: 14ç®‡æ‰€
2. anyå‹ï¼ˆå®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½ï¼‰: 60ç®‡æ‰€ä»¥ä¸Š
3. Zod.strict()å½è£…: 4ç®‡æ‰€
4. å‹å®šç¾©ã®ä¸æ•´åˆ: 6ç®‡æ‰€

**ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: **ä»Šã™ãå…¨ã¦ä¿®æ­£**

---

## ğŸ“‹ ä¿®æ­£ã™ã¹ãç®‡æ‰€ã®å®Œå…¨ãƒªã‚¹ãƒˆ

### Phase 1-A: ä»Šå›ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§å£Šã—ãŸç®‡æ‰€ï¼ˆæœ€é«˜å„ªå…ˆãƒ»20ç®‡æ‰€ï¼‰

#### 1. Partial<Client> + ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤ï¼ˆ8ç®‡æ‰€ï¼‰

| ãƒ•ã‚¡ã‚¤ãƒ« | è¡Œ | å•é¡Œ | ä¿®æ­£å†…å®¹ |
|---------|-----|------|---------|
| FileTypeDetector.ts | L22 | `Partial<Client>` | `ClientMinimal` ã«å¤‰æ›´ |
| FileTypeDetector.ts | L42-46 | ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤ 6ç®‡æ‰€ | å…¨å‰Šé™¤ |
| FileTypeDetector.ts | L123-124 | `Partial<Client>` + ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ | ä¸¡æ–¹ä¿®æ­£ |

**ä¿®æ­£ä¾‹**:
```typescript
// ä¿®æ­£å‰
static buildPrompt(client: Partial<Client>): string {
  const code = client.clientCode || 'XXX';
}

// ä¿®æ­£å¾Œ
type ClientMinimal = Pick<Client, 'clientCode' | 'fiscalMonth' | 'taxMethod' | ...>;
static buildPrompt(client: ClientMinimal): string {
  const code = client.clientCode;  // å‹ãŒä¿è¨¼ã•ã‚Œã‚‹
}
```

---

#### 2. GeminiVisionService.tsï¼ˆ7ç®‡æ‰€ï¼‰

| è¡Œ | å•é¡Œ | ä¿®æ­£å†…å®¹ |
|----|------|---------|
| L28 | `Partial<Client>` | `ClientMinimal` |
| L49 | API ã‚­ãƒ¼ç©ºæ–‡å­—åˆ— | ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‰Šé™¤ |
| L100 | anyå‹ | `JournalLineDraft` |
| L117 | clientIdç©ºæ–‡å­—åˆ— | ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‰Šé™¤ |
| L118 | clientCodeç©ºæ–‡å­—åˆ— | ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‰Šé™¤ |
| L125 | anyå‹ | `JournalLineDraft` |
| L168 | ãƒãƒƒã‚·ãƒ¥ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ | 'NODATE'ç­‰å‰Šé™¤ |

---

#### 3. CsvValidator.tsï¼ˆ2ç®‡æ‰€ãƒ»å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½ã®ã¿ï¼‰

| è¡Œ | å•é¡Œ | ä¿®æ­£å†…å®¹ |
|----|------|---------|
| L21 | `entry: any` | `JournalEntry` |
| L31 | `line: any` | `JournalLine` |

**æ³¨æ„**: L100, L108ã® Phase 2æœªå®Ÿè£…ã¯**ä¿®æ­£ã—ãªã„**

---

#### 4. CsvExportService.tsï¼ˆ1ç®‡æ‰€ï¼‰

| è¡Œ | å•é¡Œ | ä¿®æ­£å†…å®¹ |
|----|------|---------|
| L96 | `Record<string, any>` | `Record<string, string \| number>` |

---

#### 5. services/JournalService.tsï¼ˆ1ç®‡æ‰€ï¼‰

| è¡Œ | å•é¡Œ | ä¿®æ­£å†…å®¹ |
|----|------|---------|
| L93 | `Partial<JournalEntry>` | `JournalEntryUpdate` å‹ã‚’å®šç¾© |

---

### Phase 1-B: éå»ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§å£Šã—ãŸç®‡æ‰€ï¼ˆé«˜å„ªå…ˆãƒ»10ç®‡æ‰€ï¼‰

#### 6. types/zod_schema.tsï¼ˆ5ç®‡æ‰€ï¼‰

| è¡Œ | å•é¡Œ | ä¿®æ­£å†…å®¹ |
|----|------|---------|
| L224 | `apiResponse: z.any()` | æ­£ã—ã„ã‚¹ã‚­ãƒ¼ãƒå®šç¾© |
| L246 | `debits: z.array(z.any())` | `z.array(JournalLineSchema)` |
| L247 | `credits: z.array(z.any())` | `z.array(JournalLineSchema)` |
| L488 | `previousData: z.any()` | `z.unknown()` ã¾ãŸã¯å…·ä½“çš„ãªå‹ |
| L489 | `newData: z.any()` | `z.unknown()` ã¾ãŸã¯å…·ä½“çš„ãªå‹ |

---

#### 7. types/firestore.tsï¼ˆ3ç®‡æ‰€ï¼‰

| è¡Œ | å•é¡Œ | ä¿®æ­£å†…å®¹ |
|----|------|---------|
| L263 | `apiResponse?: any` | `NTAApiResponse` å‹å®šç¾© |
| L336 | `previousData?: any` | `unknown` ã¾ãŸã¯å…·ä½“çš„ãªå‹ |
| L337 | `newData?: any` | `unknown` ã¾ãŸã¯å…·ä½“çš„ãªå‹ |

---

#### 8. types/journal.tsï¼ˆå‹å®šç¾©ã®ä¸æ•´åˆãƒ»æœ€å„ªå…ˆï¼‰

**å•é¡Œ**: 
- `JournalEntry` ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒ features/journal/JournalEntrySchema.ts ã¨ä¸æ•´åˆ
- `status` ã®å‹ãŒç•°ãªã‚‹ï¼ˆJobStatus vs 'Draft' | 'Submitted' | 'Approved'ï¼‰

**ä¿®æ­£å†…å®¹**:
- features/journal/JournalEntrySchema.ts ã‚’æ­£ã¨ã™ã‚‹
- types/journal.ts ã‚’å‰Šé™¤ã¾ãŸã¯ç§»è¡Œãƒ‘ã‚¹ã‚’æ˜ç¢ºåŒ–

---

#### 9. JournalSemanticGuard.tsï¼ˆstatusæœªä½¿ç”¨ï¼‰

**å•é¡Œ**: status ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ä¸€åˆ‡ä½¿ç”¨ã—ã¦ã„ãªã„ï¼ˆgrep 0ä»¶ï¼‰

**ä¿®æ­£å†…å®¹**: 
- L17-86ã®å…¨ãƒ¡ã‚½ãƒƒãƒ‰ã§ status ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ 
- ã¾ãŸã¯ã€Œstatus ã¯ Phase 2ã§ä½¿ç”¨ã€ã¨ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ 

---

#### 9. JournalSemanticGuard.tsï¼ˆstatusæœªä½¿ç”¨ï¼‰

**å•é¡Œ**: status ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ä¸€åˆ‡ä½¿ç”¨ã—ã¦ã„ãªã„ï¼ˆgrep 0ä»¶ï¼‰

**ä¿®æ­£å†…å®¹**: 
- Option A: status ãƒã‚§ãƒƒã‚¯ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ 
- Option B: ã€Œstatus ã¯ Phase 2ã§ä½¿ç”¨ã€ã¨ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ 

**å„ªå…ˆåº¦**: ä¸­

---

### Phase 2: UIå®Ÿè£…å‰ã«ä¿®æ­£ã™ã¹ãï¼ˆä¸­å„ªå…ˆãƒ»30ç®‡æ‰€ä»¥ä¸Šï¼‰

#### 10. æ—¢å­˜APIã®anyå‹ï¼ˆ15ç®‡æ‰€ï¼‰

| ãƒ•ã‚¡ã‚¤ãƒ« | anyå‹ã®ç®‡æ‰€æ•° |
|---------|--------------|
| api/services/JournalService.ts | 10ç®‡æ‰€ |
| api/routes/journal-status.ts | 3ç®‡æ‰€ |
| api/services/WorkerService.ts | 1ç®‡æ‰€ |
| api/services/ConversionService.ts | 1ç®‡æ‰€ |

**ä¿®æ­£å†…å®¹**: payload ç­‰ã® any å‹ã‚’æ­£ã—ã„å‹ã«ç½®ãæ›ãˆ

---

#### 11. Composablesã®anyå‹ï¼ˆ15ç®‡æ‰€ï¼‰

| ãƒ•ã‚¡ã‚¤ãƒ« | anyå‹ã®ç®‡æ‰€æ•° |
|---------|--------------|
| composables/mapper.ts | 3ç®‡æ‰€ |
| composables/JournalStatusMapper.ts | 3ç®‡æ‰€ |
| composables/useClientListRPC.ts | 2ç®‡æ‰€ |
| composables/useDataConversion.ts | 2ç®‡æ‰€ |
| composables/useJournalEditor.ts | æ–°ã‚¹ã‚­ãƒ¼ãƒæœªå¯¾å¿œ |
| ãã®ä»– | 5ç®‡æ‰€ |

**ä¿®æ­£å†…å®¹**: any å‹ã‚’æ­£ã—ã„å‹ã«ç½®ãæ›ãˆ

**æ³¨æ„**: æ—¢å­˜UIã§ä½¿ç”¨ä¸­ã®ãŸã‚ã€å‹ã‚¨ãƒ©ãƒ¼ã®ä¿®æ­£ãŒå¿…è¦

---

#### 12. æ—¢å­˜æ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯

| ãƒ•ã‚¡ã‚¤ãƒ« | çŠ¶æ…‹ |
|---------|------|
| services/DetectionLogic.ts | æ—¢å­˜UIã§å‹•ä½œä¸­ |
| services/GeneralLedgerService.ts | æ—¢å­˜UIã§å‹•ä½œä¸­ |
| services/RecurringLogic.ts | æ—¢å­˜UIã§å‹•ä½œä¸­ |
| composables/useAccountingSystem.ts | ãƒ¡ã‚¤ãƒ³UIï¼ˆ1419è¡Œï¼‰ |
| composables/useBankLogic.ts | æ—¢å­˜UIã§å‹•ä½œä¸­ |

**ä¿®æ­£å†…å®¹**: å‹å®šç¾©ã®å¤‰æ›´ã«è¿½å¾“

**æ³¨æ„**: æ—¢å­˜UIã§å‹•ä½œä¸­ã®ãŸã‚ã€æ…é‡ãªä¿®æ­£ãŒå¿…è¦

---

## ğŸ“Š ä¿®æ­£ã®å„ªå…ˆé †ä½ã‚µãƒãƒªãƒ¼

| å„ªå…ˆåº¦ | ã‚«ãƒ†ã‚´ãƒª | ç®‡æ‰€æ•° | å½±éŸ¿ | æœŸé™ | UIç ´å£Š |
|--------|---------|--------|------|------|--------|
| **æœ€é«˜** | Phase 1-Aï¼ˆä»Šå›å®Ÿè£…ï¼‰ | 20ç®‡æ‰€ | å®Ÿè£…ã‚³ãƒ¼ãƒ‰ãŒå‹•ã‹ãªã„ | **ä»Šã™ã** | ãªã— |
| **é«˜** | Phase 1-Bï¼ˆå‹å®šç¾©ï¼‰ | 10ç®‡æ‰€ | å‹å®šç¾©ãŒè¡çª | **ä»Šã™ã** | ãªã— |
| **ä¸­** | Phase 2ï¼ˆæ—¢å­˜UIï¼‰ | 30ç®‡æ‰€ | æ—¢å­˜UIã«å½±éŸ¿ | UIå®Ÿè£…å‰ | å‹ã‚¨ãƒ©ãƒ¼è¦ä¿®æ­£ |
| - | **Phase 2æœªå®Ÿè£…** | 6ç®‡æ‰€ | ãªã— | **ä¿®æ­£ä¸è¦** | ãªã— |

---

## ğŸ¤– AIãŒã‚„ã£ã¦ã¯ã„ã‘ãªã„ã“ã¨ãƒ»è¨±ã•ã‚Œã‚‹ã“ã¨ã®å®Œå…¨ãªé¡å‹

### é¡å‹ã®å®Œå…¨æ•´ç†

| é¡å‹ | ä»Šã™ãä¿®æ­£ | å°†æ¥Phase | ä¿®æ­£ä¸è¦ | èª¬æ˜ |
|------|-----------|----------|---------|------|
| **1. Partial + ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯** | âœ… | - | - | å‹å¥‘ç´„ç ´å£Šï¼ˆSilent Corruptionï¼‰ |
| **2. anyå‹ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰** | âœ… | - | - | å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½ã§ã®å‹å®‰å…¨æ€§æ”¾æ£„ |
| **3. statusæœªä½¿ç”¨** | âœ… | - | - | æ¥­å‹™çŠ¶æ…‹é·ç§»ã®ç›£æŸ»ä¸èƒ½ |
| **4. eslint-disable** | - | - | âœ… | Phase 2æœªå®Ÿè£…æ©Ÿèƒ½ã®è­¦å‘ŠæŠ‘åˆ¶ |
| **5. Zod.strict()å½è£…** | â€»1+2 | - | - | é¡å‹1+2ã®å‰¯ä½œç”¨ï¼ˆç‹¬ç«‹é¡å‹ã§ã¯ãªã„ï¼‰ |
| **6. Zodã‚¹ã‚­ãƒ¼ãƒanyå‹** | âœ… | - | - | ã‚¹ã‚­ãƒ¼ãƒãƒ¬ãƒ™ãƒ«ã§ã®å‹å®‰å…¨æ€§æ”¾æ£„ |
| **7. å‹å®šç¾©anyå‹** | âœ… | - | - | ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§ã®å‹å®‰å…¨æ€§æ”¾æ£„ |
| **8. å…¨ä½“anyå‹æ¿«ç”¨** | - | âœ… | - | æ—¢å­˜UIã§ã®å‹å®‰å…¨æ€§æ”¾æ£„ |
| **9. å‹å®šç¾©ä¸æ•´åˆ** | âœ… | - | - | æ–°æ—§ã‚¹ã‚­ãƒ¼ãƒã®æ··åœ¨ |

---

### âŒ AIãŒã‚„ã£ã¦ã¯ã„ã‘ãªã„ã“ã¨ï¼ˆç¦æ­¢äº‹é …ï¼‰

#### 1. Partial<T> + ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤
```typescript
// âŒ çµ¶å¯¾ç¦æ­¢
function buildPrompt(client: Partial<Client>): string {
  const code = client.clientCode || 'XXX';  // Silent Corruption
}
```
**ç†ç”±**: å‹å¥‘ç´„ã‚’ç ´å£Šã—ã€èª¤ã£ãŸãƒ‡ãƒ¼ã‚¿ã‚’ silent ã«æ··å…¥

---

#### 2. anyå‹ï¼ˆå®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½ï¼‰
```typescript
// âŒ çµ¶å¯¾ç¦æ­¢ï¼ˆå®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½ã®å ´åˆï¼‰
static validateMF(entry: any): void {
  if (entry.description && ...) {  // å®Ÿè£…æ¸ˆã¿ãªã®ã« any
}
```
**ç†ç”±**: TypeScript ã®å‹å®‰å…¨æ€§ã‚’å®Œå…¨ã«æ”¾æ£„

---

#### 3. status ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ç„¡è¦–
```typescript
// âŒ çµ¶å¯¾ç¦æ­¢
static validate(entry: JournalEntry): void {
  // entry.status ã‚’ãƒã‚§ãƒƒã‚¯ã—ãªã„
}
```
**ç†ç”±**: æ¥­å‹™çŠ¶æ…‹é·ç§»ã®ç›£æŸ»ä¸èƒ½

---

#### 4. Zodã‚¹ã‚­ãƒ¼ãƒã§ã®anyå‹
```typescript
// âŒ çµ¶å¯¾ç¦æ­¢
const Schema = z.object({
  data: z.any()  // Zod ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒç„¡æ„å‘³
});
```
**ç†ç”±**: ã‚¹ã‚­ãƒ¼ãƒãƒ¬ãƒ™ãƒ«ã§å‹å®‰å…¨æ€§ã‚’æ”¾æ£„

---

#### 5. å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã§ã®anyå‹
```typescript
// âŒ çµ¶å¯¾ç¦æ­¢
export interface AuditLog {
  previousData?: any;  // å‹å®šç¾©ãƒ¬ãƒ™ãƒ«ã§æ”¾æ£„
}
```
**ç†ç”±**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã« any å‹ãŒä¼æ’­

---

#### 6. å‹å®šç¾©ã®äºŒé‡ç®¡ç†
```typescript
// âŒ çµ¶å¯¾ç¦æ­¢
// types/journal.ts ã« JournalEntry
// features/journal/JournalEntrySchema.ts ã«ã‚‚ JournalEntry
// â†’ ã©ã¡ã‚‰ãŒæ­£ã—ã„ã‹ä¸æ˜
```
**ç†ç”±**: å‹å®šç¾©ã®è¡çªãƒ»æ··ä¹±

---

### âœ… AIã«è¨±ã•ã‚Œã‚‹ã“ã¨ï¼ˆä¾‹å¤–äº‹é …ï¼‰

#### 1. Phase 2æœªå®Ÿè£…æ©Ÿèƒ½ã§ã®eslint-disable
```typescript
// âœ… è¨±å¯ï¼ˆPhase 2æœªå®Ÿè£…ã®å ´åˆã®ã¿ï¼‰
static validateFreee(_entry: any): void {  // eslint-disable-line
  throw new Error('validateFreee() ã¯Phase 2ã§å®Ÿè£…äºˆå®š');
}
```
**ç†ç”±**: æœªå®Ÿè£…æ©Ÿèƒ½ã ã‹ã‚‰ã€ä»Šã¯è­¦å‘Šã§OK

---

#### 2. unknownå‹ã®ä½¿ç”¨
```typescript
// âœ… è¨±å¯ï¼ˆany ã®ä»£ã‚ã‚Šã«ï¼‰
export interface AuditLog {
  previousData?: unknown;  // any ã‚ˆã‚Šå®‰å…¨
}
```
**ç†ç”±**: unknown ã¯å‹ãƒã‚§ãƒƒã‚¯ã‚’å¼·åˆ¶ã™ã‚‹

---

#### 3. å¿…è¦æœ€å°é™ã®å‹å®šç¾©
```typescript
// âœ… è¨±å¯
type ClientMinimal = Pick<Client, 'clientCode' | 'fiscalMonth'>;
function buildPrompt(client: ClientMinimal): string
```
**ç†ç”±**: å¿…è¦ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ã¿ã‚’è¦æ±‚

---

## âš–ï¸ æœ€çµ‚åˆ¤å®š

### è¨¼æ‹ ã®ç·æ•°
- **ä»Šå›å®Ÿè£…ã§ç ´å£Š**: 20ç®‡æ‰€
- **éå»å®Ÿè£…ã§ç ´å£Š**: 10ç®‡æ‰€
- **æ—¢å­˜UIã§ç ´å£Š**: 30ç®‡æ‰€ä»¥ä¸Š
- **Phase 2æœªå®Ÿè£…**: 6ç®‡æ‰€ï¼ˆä¿®æ­£ä¸è¦ï¼‰
- **åˆè¨ˆç ´å£Šç®‡æ‰€**: **60ç®‡æ‰€ä»¥ä¸Š**
- **åˆè¨ˆè¨¼æ‹ ï¼ˆæœªå®Ÿè£…å«ã‚€ï¼‰**: **90ç®‡æ‰€ä»¥ä¸Š**

### å½±éŸ¿ç¯„å›²
- **å®Ÿè£…8ãƒ•ã‚¡ã‚¤ãƒ«**: 20ç®‡æ‰€
- **å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«**: 10ç®‡æ‰€
- **æ—¢å­˜APIãƒ»UI**: 30ç®‡æ‰€ä»¥ä¸Š
- **åˆè¨ˆ**: **15ãƒ•ã‚¡ã‚¤ãƒ«ä»¥ä¸Š**

---

**çµè«–**: 
- **Phase 2æœªå®Ÿè£…ï¼ˆ6ç®‡æ‰€ï¼‰**: è­¦å‘Šã¨ã—ã¦æ®‹ã™ âœ…
- **å‹å®‰å…¨æ€§ç ´å£Šï¼ˆ60ç®‡æ‰€ä»¥ä¸Šï¼‰**: ä»Šã™ãä¿®æ­£ âŒ
- **ã“ã®ã‚³ãƒ¼ãƒ‰ã¯æœ¬ç•ªç’°å¢ƒã«æŠ•å…¥ä¸å¯**

**End of Document**
