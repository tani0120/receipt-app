# ggshield Pre-commit Hook ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†

## ğŸ“‹ å®Ÿæ–½å†…å®¹

### **1. ggshield ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
```powershell
pip install ggshield
```
âœ… **çµæœ**: ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.x.x ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†

---

### **2. GitGuardianèªè¨¼è¨­å®š**

#### **Personal Access Tokenä½œæˆ**
- **URL**: [GitGuardian Dashboard](https://dashboard.gitguardian.com/workspace/settings/tokens)
- **Tokenå**: `ggshield token`
- **Scope**: `scan` (ãƒªãƒã‚¸ãƒˆãƒªã‚¹ã‚­ãƒ£ãƒ³æ¨©é™)
- **æœ‰åŠ¹æœŸé™**: `Never`
- **Status**: âœ… Active

#### **ç’°å¢ƒå¤‰æ•°è¨­å®š**
```powershell
[System.Environment]::SetEnvironmentVariable('GITGUARDIAN_API_KEY','<token>','User')
```
âœ… **çµæœ**: æ°¸ç¶šçš„ãªç’°å¢ƒå¤‰æ•°ã¨ã—ã¦è¨­å®šå®Œäº†

---

### **3. Pre-commit Hook ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
```powershell
ggshield install -m local
```

**ä½œæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«**:
- `.git\hooks\pre-commit` âœ…

**å‹•ä½œ**:
- ã‚³ãƒŸãƒƒãƒˆå®Ÿè¡Œæ™‚ã«è‡ªå‹•çš„ã«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¹ã‚­ãƒ£ãƒ³ã‚’å®Ÿè¡Œ
- ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œçŸ¥æ™‚ã¯ã‚³ãƒŸãƒƒãƒˆã‚’ãƒ–ãƒ­ãƒƒã‚¯

---

### **4. å‹•ä½œç¢ºèª**

#### **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚¹ã‚­ãƒ£ãƒ³ç¢ºèª**
```
Scanning... â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   0% 0 / 1

No secrets have been found
```
âœ… **çµæœ**: ggshieldæ­£å¸¸å‹•ä½œã‚’ç¢ºèª

#### **ãƒ†ã‚¹ãƒˆå¾Œã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**
- ãƒ†ã‚¹ãƒˆã‚³ãƒŸãƒƒãƒˆ3ä»¶å‰Šé™¤ (`git reset --hard HEAD~3`)
- ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤å®Œäº†
- ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã«å¾©å…ƒ âœ…

---

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£çŠ¶æ…‹

| é …ç›® | çŠ¶æ…‹ |
|:---|:---|
| **Pre-commit Hook** | âœ… æœ‰åŠ¹ |
| **GitGuardianèªè¨¼** | âœ… å®Œäº† |
| **ç’°å¢ƒå¤‰æ•°** | âœ… æ°¸ç¶šåŒ–æ¸ˆã¿ |
| **ãƒªãƒã‚¸ãƒˆãƒªçŠ¶æ…‹** | âœ… ã‚¯ãƒªãƒ¼ãƒ³ |

---

## ğŸ“ ä»Šå¾Œã®å‹•ä½œ

### **é€šå¸¸ã®ã‚³ãƒŸãƒƒãƒˆæ™‚**
```powershell
git add .
git commit -m "feat: æ–°æ©Ÿèƒ½è¿½åŠ "
```

**ggshieldãŒè‡ªå‹•å®Ÿè¡Œ**:
1. ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¹ã‚­ãƒ£ãƒ³
2. APIã‚­ãƒ¼ã€ãƒˆãƒ¼ã‚¯ãƒ³ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã©ã‚’æ¤œçŸ¥
3. å•é¡Œãªã‘ã‚Œã°ã‚³ãƒŸãƒƒãƒˆæˆåŠŸ

### **ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œçŸ¥æ™‚**
```
âš ï¸  Error: Secrets detected!

File: .env
Line 5: FIREBASE_API_KEY=AIzaSy...

Commit blocked to prevent secret leakage.
```

---

## âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …

### **ç’°å¢ƒå¤‰æ•°ã®ç¶™ç¶šæ€§**
- âœ… `User`ãƒ¬ãƒ™ãƒ«ã®ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦è¨­å®šæ¸ˆã¿
- æ–°ã—ã„PowerShellã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ã‚‚æœ‰åŠ¹
- PCå†èµ·å‹•å¾Œã‚‚ç¶­æŒã•ã‚Œã‚‹

### **GitGuardian Tokenç®¡ç†**
- ãƒˆãƒ¼ã‚¯ãƒ³ã¯äºŒåº¦ã¨è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“
- ç´›å¤±ã—ãŸå ´åˆã¯æ–°è¦ä½œæˆãŒå¿…è¦
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã„ã¤ã§ã‚‚ç„¡åŠ¹åŒ–å¯èƒ½

---

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

### **GitHub Secret Scanningæœ‰åŠ¹åŒ–**
ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ã®è¿½åŠ ä¿è­·å±¤ã¨ã—ã¦æ¨å¥¨ï¼š

1. ãƒªãƒã‚¸ãƒˆãƒªSettings â†’ Security â†’ Code security and analysis
2. "Secret scanning" ã‚’æœ‰åŠ¹åŒ–
3. "Push protection" ã‚’æœ‰åŠ¹åŒ–

**ãƒ¡ãƒªãƒƒãƒˆ**:
- GitHubã¸ã®Pushæ™‚ã«ã‚‚ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’æ¤œçŸ¥
- ä¸‡ãŒä¸€ggshieldã‚’ãƒã‚¤ãƒ‘ã‚¹ã—ã¦ã‚‚ä¿è­·ã•ã‚Œã‚‹
- ãƒãƒ¼ãƒ å…¨ä½“ã§çµ±ä¸€ã•ã‚ŒãŸã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

---

## ğŸ“Š ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¤šå±¤é˜²å¾¡

```mermaid
graph TD
    A[é–‹ç™ºè€…] -->|git commit| B[ggshield Pre-commit Hook]
    B -->|æ¤œçŸ¥ãªã—| C[ãƒ­ãƒ¼ã‚«ãƒ«ã‚³ãƒŸãƒƒãƒˆæˆåŠŸ]
    C -->|git push| D[GitHub Secret Scanning]
    D -->|æ¤œçŸ¥ãªã—| E[ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒª]
    B -->|ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œçŸ¥| F[âŒ ã‚³ãƒŸãƒƒãƒˆãƒ–ãƒ­ãƒƒã‚¯]
    D -->|ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œçŸ¥| G[âŒ Pushãƒ–ãƒ­ãƒƒã‚¯]
```

---

## âœ… ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†

ggshield Pre-commit HookãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ã€‚ä»Šå¾Œã¯ã€ã‚³ãƒŸãƒƒãƒˆæ™‚ã«è‡ªå‹•çš„ã«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãŒã‚¹ã‚­ãƒ£ãƒ³ã•ã‚Œã€APIã‚­ãƒ¼ã‚„ãƒˆãƒ¼ã‚¯ãƒ³ã®æ¼æ´©ã‚’é˜²ãã¾ã™ã€‚
